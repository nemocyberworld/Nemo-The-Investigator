<section class="space-y-6" id="community-forum">
  <header class="flex flex-col gap-3 md:flex-row md:items-end md:justify-between">
    <div>
      <h2 class="text-2xl font-bold">Community — Forum</h2>
      <p class="text-gray-300">
        Collection of forums, Q&A boards, research hubs, and community search portals for investigations, tech help, and discussion.
      </p>
    </div>
    <div class="flex flex-col sm:flex-row gap-2">
      <input id="forumQuery" type="text" placeholder="Optional search term, e.g. 'OPSEC', 'Linux', 'leak'"
             class="px-3 py-2 rounded-lg bg-gray-900 border border-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500"
             onkeydown="if(event.key==='Enter'){document.getElementById('openAllForum').click();}">
      <div class="flex gap-2">
        <button id="openAllForum"
          class="px-4 py-2 rounded-lg bg-indigo-600 hover:bg-indigo-500 font-semibold"
          onclick="
            const root=this.closest('section');
            const input=root.querySelector('#forumQuery');
            const q=(input.value||'').trim();
            const links=[...root.querySelectorAll('a[data-tool]')];
            let blocked=false;
            links.forEach((a,i)=>{
              let url=(a.getAttribute('data-url')||a.getAttribute('href')||'');
              if(url.includes('{q}')) url=url.replaceAll('{q}', encodeURIComponent(q||''));
              setTimeout(()=>{
                const w=window.open(url,'_blank','noopener');
                if(!w||w.closed||typeof w.closed==='undefined') blocked=true;
                if(i===links.length-1 && blocked){
                  const warn=root.querySelector('#popupWarn'); if(warn) warn.classList.remove('hidden');
                }
              }, i*200);
            });
          ">
          Open All
        </button>
        <button
          class="px-4 py-2 rounded-lg bg-gray-800 border border-gray-700 hover:bg-gray-700"
          onclick="
            const v=(document.getElementById('forumQuery').value||'');
            if(navigator.clipboard&&navigator.clipboard.writeText){ navigator.clipboard.writeText(v); }
          ">
          Copy Query
        </button>
      </div>
    </div>
  </header>

  <!-- Quick tips -->
  <div class="text-xs text-gray-400 flex flex-wrap gap-3">
    <span class="px-2 py-1 rounded-full border border-gray-700 bg-gray-900">Tip: Allow pop-ups for this site</span>
    <span class="px-2 py-1 rounded-full border border-gray-700 bg-gray-900">Enter query (optional) → Open All</span>
    <span class="px-2 py-1 rounded-full border border-gray-700 bg-gray-900">Only cards with {q} use the query</span>
  </div>

  <!-- Forums grid -->
  <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4">

    <!-- 4chan search portals -->
    <article class="p-4 rounded-xl bg-gray-900 border border-gray-700 hover:border-indigo-600/50 transition">
      <div class="flex items-start justify-between gap-3">
        <div><h3 class="font-semibold">4chanSearch</h3><p class="text-gray-400 text-sm mt-1">Meta search for 4chan archives.</p></div>
        <a data-tool data-url="https://4chansearch.org/" href="https://4chansearch.org/" target="_blank" rel="noopener"
           class="px-3 py-2 rounded-lg bg-gray-800 border border-gray-700 hover:bg-gray-700 text-sm">Open</a>
      </div>
    </article>
    <article class="p-4 rounded-xl bg-gray-900 border border-gray-700 hover:border-indigo-600/50 transition">
      <div class="flex items-start justify-between gap-3">
        <div><h3 class="font-semibold">4chan Boards Search</h3><p class="text-gray-400 text-sm mt-1">Search 4chan boards.</p></div>
        <a data-tool data-url="https://boards.4chan.org/search" href="https://boards.4chan.org/search" target="_blank" rel="noopener"
           class="px-3 py-2 rounded-lg bg-gray-800 border border-gray-700 hover:bg-gray-700 text-sm">Open</a>
      </div>
    </article>

    <!-- Board/IRC discovery -->
    <article class="p-4 rounded-xl bg-gray-900 border border-gray-700 hover:border-indigo-600/50 transition">
      <div class="flex items-start justify-between gap-3">
        <div><h3 class="font-semibold">BoardReader</h3><p class="text-gray-400 text-sm mt-1">Forum search engine (historical).</p></div>
        <a data-tool data-url="https://boardreader.com/" href="https://boardreader.com/" target="_blank" rel="noopener"
           class="px-3 py-2 rounded-lg bg-gray-800 border border-gray-700 hover:bg-gray-700 text-sm">Open</a>
      </div>
    </article>
    <article class="p-4 rounded-xl bg-gray-900 border border-gray-700 hover:border-indigo-600/50 transition">
      <div class="flex items-start justify-between gap-3">
        <div><h3 class="font-semibold">SearchIRC</h3><p class="text-gray-400 text-sm mt-1">Find IRC networks & channels.</p></div>
        <a data-tool data-url="http://searchirc.com/" href="http://searchirc.com/" target="_blank" rel="noopener"
           class="px-3 py-2 rounded-lg bg-gray-800 border border-gray-700 hover:bg-gray-700 text-sm">Open</a>
      </div>
    </article>

    <!-- Forum/blog discovery -->
    <article class="p-4 rounded-xl bg-gray-900 border border-gray-700 hover:border-indigo-600/50 transition">
      <div class="flex items-start justify-between gap-3">
        <div><h3 class="font-semibold">Omgili</h3><p class="text-gray-400 text-sm mt-1">Discussions, forums & Q&A discovery.</p></div>
        <a data-tool data-url="http://www.omgili.com/" href="http://www.omgili.com/" target="_blank" rel="noopener"
           class="px-3 py-2 rounded-lg bg-gray-800 border border-gray-700 hover:bg-gray-700 text-sm">Open</a>
      </div>
    </article>

    <!-- Google/Yahoo Groups (archival) -->
    <article class="p-4 rounded-xl bg-gray-900 border border-gray-700 hover:border-indigo-600/50 transition">
      <div class="flex items-start justify-between gap-3">
        <div><h3 class="font-semibold">Google Groups</h3><p class="text-gray-400 text-sm mt-1">Mailing lists & forums.</p></div>
        <a data-tool data-url="https://groups.google.com/forum/" href="https://groups.google.com/forum/" target="_blank" rel="noopener"
           class="px-3 py-2 rounded-lg bg-gray-800 border border-gray-700 hover:bg-gray-700 text-sm">Open</a>
      </div>
    </article>
    <article class="p-4 rounded-xl bg-gray-900 border border-gray-700 hover:border-indigo-600/50 transition">
      <div class="flex items-start justify-between gap-3">
        <div><h3 class="font-semibold">Yahoo Groups (Archived)</h3><p class="text-gray-400 text-sm mt-1">Legacy group pages (read-only).</p></div>
        <a data-tool data-url="http://groups.yahoo.com/" href="http://groups.yahoo.com/" target="_blank" rel="noopener"
           class="px-3 py-2 rounded-lg bg-gray-800 border border-gray-700 hover:bg-gray-700 text-sm">Open</a>
      </div>
    </article>

    <!-- Usenet / NZB group directories -->
    <article class="p-4 rounded-xl bg-gray-900 border border-gray-700 hover:border-indigo-600/50 transition">
      <div class="flex items-start justify-between gap-3">
        <div><h3 class="font-semibold">Binsearch</h3><p class="text-gray-400 text-sm mt-1">Usenet binary search & groups.</p></div>
        <a data-tool data-url="http://www.binsearch.info/" href="http://www.binsearch.info/" target="_blank" rel="noopener"
           class="px-3 py-2 rounded-lg bg-gray-800 border border-gray-700 hover:bg-gray-700 text-sm">Open</a>
      </div>
    </article>
    <article class="p-4 rounded-xl bg-gray-900 border border-gray-700 hover:border-indigo-600/50 transition">
      <div class="flex items-start justify-between gap-3">
        <div><h3 class="font-semibold">NZBIndex Groups</h3><p class="text-gray-400 text-sm mt-1">Browse Usenet groups.</p></div>
        <a data-tool data-url="http://www.nzbindex.com/groups/" href="http://www.nzbindex.com/groups/" target="_blank" rel="noopener"
           class="px-3 py-2 rounded-lg bg-gray-800 border border-gray-700 hover:bg-gray-700 text-sm">Open</a>
      </div>
    </article>

    <!-- HN & Craigslist -->
    <article class="p-4 rounded-xl bg-gray-900 border border-gray-700 hover:border-indigo-600/50 transition">
      <div class="flex items-start justify-between gap-3">
        <div><h3 class="font-semibold">HN Search</h3><p class="text-gray-400 text-sm mt-1">Search Hacker News posts/comments.</p></div>
        <a data-tool data-url="https://www.hnsearch.com/" href="https://www.hnsearch.com/" target="_blank" rel="noopener"
           class="px-3 py-2 rounded-lg bg-gray-800 border border-gray-700 hover:bg-gray-700 text-sm">Open</a>
      </div>
    </article>
    <article class="p-4 rounded-xl bg-gray-900 border border-gray-700 hover:border-indigo-600/50 transition">
      <div class="flex items-start justify-between gap-3">
        <div><h3 class="font-semibold">Craigslist Forums</h3><p class="text-gray-400 text-sm mt-1">Community discussion boards.</p></div>
        <a data-tool data-url="https://forums.craigslist.org/" href="https://forums.craigslist.org/" target="_blank" rel="noopener"
           class="px-3 py-2 rounded-lg bg-gray-800 border border-gray-700 hover:bg-gray-700 text-sm">Open</a>
      </div>
    </article>

    <!-- Quora & related -->
    <article class="p-4 rounded-xl bg-gray-900 border border-gray-700 hover:border-indigo-600/50 transition">
      <div class="flex items-start justify-between gap-3">
        <div><h3 class="font-semibold">Quora Web Search</h3><p class="text-gray-400 text-sm mt-1">Discover Q&A via web search.</p></div>
        <a data-tool data-url="http://www.quora.com/Web-Search" href="http://www.quora.com/Web-Search" target="_blank" rel="noopener"
           class="px-3 py-2 rounded-lg bg-gray-800 border border-gray-700 hover:bg-gray-700 text-sm">Open</a>
      </div>
    </article>
    <article class="p-4 rounded-xl bg-gray-900 border border-gray-700 hover:border-indigo-600/50 transition">
      <div class="flex items-start justify-between gap-3">
        <div><h3 class="font-semibold">Quora</h3><p class="text-gray-400 text-sm mt-1">Ask questions, get answers.</p></div>
        <a data-tool data-url="https://quora.com" href="https://quora.com" target="_blank" rel="noopener"
           class="px-3 py-2 rounded-lg bg-gray-800 border border-gray-700 hover:bg-gray-700 text-sm">Open</a>
      </div>
    </article>
    <article class="p-4 rounded-xl bg-gray-900 border border-gray-700 hover:border-indigo-600/50 transition">
      <div class="flex items-start justify-between gap-3">
        <div><h3 class="font-semibold">Yahoo Answers (Archived)</h3><p class="text-gray-400 text-sm mt-1">Read-only legacy Q&A.</p></div>
        <a data-tool data-url="https://answers.yahoo.com" href="https://answers.yahoo.com" target="_blank" rel="noopener"
           class="px-3 py-2 rounded-lg bg-gray-800 border border-gray-700 hover:bg-gray-700 text-sm">Open</a>
      </div>
    </article>

    <!-- Discord directory -->
    <article class="p-4 rounded-xl bg-gray-900 border border-gray-700 hover:border-indigo-600/50 transition">
      <div class="flex items-start justify-between gap-3">
        <div><h3 class="font-semibold">Disboard</h3><p class="text-gray-400 text-sm mt-1">Discover Discord servers.</p></div>
        <a data-tool data-url="https://disboard.org/de/search" href="https://disboard.org/de/search" target="_blank" rel="noopener"
           class="px-3 py-2 rounded-lg bg-gray-800 border border-gray-700 hover:bg-gray-700 text-sm">Open</a>
      </div>
    </article>

    <!-- Stack Exchange Network -->
    <article class="p-4 rounded-xl bg-gray-900 border border-gray-700 hover:border-indigo-600/50 transition">
      <div class="flex items-start justify-between gap-3">
        <div><h3 class="font-semibold">Stack Overflow</h3><p class="text-gray-400 text-sm mt-1">Programming Q&A.</p></div>
        <a data-tool data-url="https://stackoverflow.com" href="https://stackoverflow.com" target="_blank" rel="noopener"
           class="px-3 py-2 rounded-lg bg-gray-800 border border-gray-700 hover:bg-gray-700 text-sm">Open</a>
      </div>
    </article>
    <article class="p-4 rounded-xl bg-gray-900 border border-gray-700 hover:border-indigo-600/50 transition">
      <div class="flex items-start justify-between gap-3">
        <div><h3 class="font-semibold">Super User</h3><p class="text-gray-400 text-sm mt-1">Power user computing Q&A.</p></div>
        <a data-tool data-url="https://superuser.com" href="https://superuser.com" target="_blank" rel="noopener"
           class="px-3 py-2 rounded-lg bg-gray-800 border border-gray-700 hover:bg-gray-700 text-sm">Open</a>
      </div>
    </article>
    <article class="p-4 rounded-xl bg-gray-900 border border-gray-700 hover:border-indigo-600/50 transition">
      <div class="flex items-start justify-between gap-3">
        <div><h3 class="font-semibold">Server Fault</h3><p class="text-gray-400 text-sm mt-1">Sysadmin & DevOps Q&A.</p></div>
        <a data-tool data-url="https://serverfault.com" href="https://serverfault.com" target="_blank" rel="noopener"
           class="px-3 py-2 rounded-lg bg-gray-800 border border-gray-700 hover:bg-gray-700 text-sm">Open</a>
      </div>
    </article>
    <article class="p-4 rounded-xl bg-gray-900 border border-gray-700 hover:border-indigo-600/50 transition">
      <div class="flex items-start justify-between gap-3">
        <div><h3 class="font-semibold">Ask Ubuntu</h3><p class="text-gray-400 text-sm mt-1">Ubuntu-focused Q&A.</p></div>
        <a data-tool data-url="https://askubuntu.com" href="https://askubuntu.com" target="_blank" rel="noopener"
           class="px-3 py-2 rounded-lg bg-gray-800 border border-gray-700 hover:bg-gray-700 text-sm">Open</a>
      </div>
    </article>
    <article class="p-4 rounded-xl bg-gray-900 border border-gray-700 hover:border-indigo-600/50 transition">
      <div class="flex items-start justify-between gap-3">
        <div><h3 class="font-semibold">MathOverflow</h3><p class="text-gray-400 text-sm mt-1">Research-level math Q&A.</p></div>
        <a data-tool data-url="https://mathoverflow.net" href="https://mathoverflow.net" target="_blank" rel="noopener"
           class="px-3 py-2 rounded-lg bg-gray-800 border border-gray-700 hover:bg-gray-700 text-sm">Open</a>
      </div>
    </article>
    <article class="p-4 rounded-xl bg-gray-900 border border-gray-700 hover:border-indigo-600/50 transition">
      <div class="flex items-start justify-between gap-3">
        <div><h3 class="font-semibold">Stack Exchange</h3><p class="text-gray-400 text-sm mt-1">All communities directory.</p></div>
        <a data-tool data-url="https://stackexchange.com" href="https://stackexchange.com" target="_blank" rel="noopener"
           class="px-3 py-2 rounded-lg bg-gray-800 border border-gray-700 hover:bg-gray-700 text-sm">Open</a>
      </div>
    </article>

    <!-- Academic forums & networks -->
    <article class="p-4 rounded-xl bg-gray-900 border border-gray-700 hover:border-indigo-600/50 transition">
      <div class="flex items-start justify-between gap-3">
        <div><h3 class="font-semibold">ResearchGate</h3><p class="text-gray-400 text-sm mt-1">Academic Q&A & collaboration.</p></div>
        <a data-tool data-url="https://researchgate.net" href="https://researchgate.net" target="_blank" rel="noopener"
           class="px-3 py-2 rounded-lg bg-gray-800 border border-gray-700 hover:bg-gray-700 text-sm">Open</a>
      </div>
    </article>
    <article class="p-4 rounded-xl bg-gray-900 border border-gray-700 hover:border-indigo-600/50 transition">
      <div class="flex items-start justify-between gap-3">
        <div><h3 class="font-semibold">Academia.edu</h3><p class="text-gray-400 text-sm mt-1">Research profiles & papers.</p></div>
        <a data-tool data-url="https://academia.edu" href="https://academia.edu" target="_blank" rel="noopener"
           class="px-3 py-2 rounded-lg bg-gray-800 border border-gray-700 hover:bg-gray-700 text-sm">Open</a>
      </div>
    </article>

  </div>

  <details class="mt-2">
    <summary class="cursor-pointer text-sm text-gray-300">Forum notes</summary>
    <ul class="list-disc ml-6 text-gray-400 text-sm space-y-1 mt-2">
      <li>Some links are archival or directory-style; content may be read-only.</li>
      <li>Use the optional query box; cards with <code>{q}</code> placeholders will inject your term.</li>
      <li>Respect each community’s rules and privacy expectations.</li>
    </ul>
  </details>

  <div id="popupWarn" class="hidden text-amber-300 text-xs bg-amber-900/30 border border-amber-700 rounded p-2">
    Your browser blocked some tabs. Please allow pop-ups for this site or open tools one by one.
  </div>
</section>
